create table subject
(
    id         int2 generated by default as identity not null,
    name       varchar(128)                          not null,
    created_at timestamp with time zone              not null,
    updated_at timestamp with time zone              not null,

    constraint pk__subject__id primary key (id),
    constraint uq__subject__name unique (name)
);


create table timeslot
(
    id            int2 generated by default as identity not null,
    lesson_number int2                                  not null,
    start_time    time without time zone                not null,
    end_time      time without time zone                not null,
    name          varchar(32)                           not null,
    created_at    timestamp with time zone              not null,
    updated_at    timestamp with time zone              not null,

    constraint pk__timeslot__id primary key (id),
    constraint uq__timeslot__name unique (name)
);


create table weekday
(
    id   int2        not null,
    name varchar(32) not null,

    constraint pk__weekday__id primary key (id)
);


create table timetable
(
    id              int4 generated by default as identity not null,
    organization_id int2                                  not null,
    group_id        int4                                  not null,
    weekday_id      int2                                  not null,
    timeslot_id     int2                                  not null,
    subject_id      int2                                  not null,
    teacher_id      int4                                  not null,
    created_at      timestamp with time zone              not null,
    updated_at      timestamp with time zone              not null,

    constraint pk__timetable__id primary key (id),
    constraint fk__timetable__organization foreign key (organization_id) references organization (id),
    constraint fk__timetable__groups foreign key (group_id) references groups (id),
    constraint fk__timetable__weekday foreign key (weekday_id) references weekday (id),
    constraint fk__timetable__timeslot foreign key (timeslot_id) references timeslot (id),
    constraint fk__timetable__subject foreign key (subject_id) references subject (id),
    constraint fk__timetable__teacher foreign key (teacher_id) references users (id)
);


insert into weekday (id, name)
values (1, 'Понедельник'),
       (2, 'Вторник'),
       (3, 'Среда'),
       (4, 'Четверг'),
       (5, 'Пятница'),
       (6, 'Суббота'),
       (7, 'Воскресенье');


insert into subject (name, created_at, updated_at)
values ('Русский язык', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Русская литература', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Белорусский язык', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Белорусская литература', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Математика', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('География', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Всемирная история', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('История Беларуси', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Английский язык', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Физическая культура', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Художественная культура', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Час здоровья и спорта', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Трудовое обучение', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Биология', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       ('Информатика', '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00');


insert into timeslot (lesson_number, start_time, end_time, name, created_at, updated_at)
values (1, '08:00', '08:45', '08:00 - 08:45 - 1', '2025-04-05 10:00:00.097000 +00:00',
        '2025-04-05 10:00:00.097000 +00:00'),
       (2, '08:55', '09:40', '08:55 - 09:40 - 2', '2025-04-05 10:00:00.097000 +00:00',
        '2025-04-05 10:00:00.097000 +00:00'),
       (3, '09:55', '10:40', '09:55 - 10:40 - 3', '2025-04-05 10:00:00.097000 +00:00',
        '2025-04-05 10:00:00.097000 +00:00'),
       (4, '10:55', '11:40', '10:55 - 11:40 - 4', '2025-04-05 10:00:00.097000 +00:00',
        '2025-04-05 10:00:00.097000 +00:00'),
       (5, '11:55', '12:40', '11:55 - 12:40 - 5', '2025-04-05 10:00:00.097000 +00:00',
        '2025-04-05 10:00:00.097000 +00:00'),
       (6, '12:55', '13:40', '12:55 - 13:40 - 6', '2025-04-05 10:00:00.097000 +00:00',
        '2025-04-05 10:00:00.097000 +00:00');


insert into timetable (organization_id, group_id, weekday_id, timeslot_id, subject_id, teacher_id, created_at,
                       updated_at)
values (1, 1, 1, 1, 1, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 1, 2, 5, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 1, 3, 9, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 2, 1, 4, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 2, 2, 14, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 2, 3, 6, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 3, 1, 3, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 3, 2, 15, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 3, 3, 12, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 4, 1, 11, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 4, 2, 13, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 4, 3, 2, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 5, 2, 7, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 5, 3, 8, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00'),
       (1, 1, 5, 4, 10, 7, '2025-04-05 10:00:00.097000 +00:00', '2025-04-05 10:00:00.097000 +00:00');


